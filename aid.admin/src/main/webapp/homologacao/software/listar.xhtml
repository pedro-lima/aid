<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

<ui:composition template="/template/template.xhtml">
	<ui:define name="content">
		<p:growl id="grow" showDetail="true" globalOnly="true" />
		<p:panel id="panel" header="Listar Software" toggleable="false">
			<p:focus context="panel" />
			<p:dataTable id="listagem" var="soft"
				value="#{listarSoftwareBean.softwareCollection}" paginator="true"
				rows="50" currentPageReportTemplate="{currentPage} de {totalPages}"
				emptyMessage="Não existem softwares cadastrados."
				paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}">				
				<p:column sortBy="marca" headerText="Marca">
					<h:outputText value="#{soft.marca}" />
				</p:column>
				<p:column sortBy="modelo" headerText="Modelo">
					<h:outputText value="#{soft.modelo}" />
				</p:column>
				<p:column sortBy="tipo" headerText="Tipo">
					<h:outputText value="#{soft.tipo.nome}" />
				</p:column>
				<p:column style="width:15%;text-align: center;" headerText="Ação">
					<h:form prependId="false">
						<p:commandButton
							actionListener="#{listarSoftwareBean.remover(soft)}" rendered="#{soft.semHomologacoes()}"
							update=":grow,:listagem" icon="ui-icon-trash">
							<p:confirm header="#{msg.confirmacao_cabecalho}" message="#{msg.confirmacao_mensagem}"
								icon="ui-icon-alert" />
						</p:commandButton>
						<p:commandButton icon="ui-icon-document"
							onclick="PF('dlg').show()" update=":gridDetail"
							actionListener="#{listarSoftwareBean.detalheSoftware(soft)}">
						</p:commandButton>
						<p:commandButton icon="ui-icon-pencil" ajax="false"
							action="#{listarSoftwareBean.editarSoftware(soft)}" />
					</h:form>
				</p:column>
			</p:dataTable>
		</p:panel>
		<p:blockUI block="listagem" trigger="listagem">
			<span>#{msg.carregando}</span>
			<br />
			<h:graphicImage library="images" name="load2.gif" />
		</p:blockUI>
		<h:form>
			<p:confirmDialog global="true" showEffect="fade" hideEffect="explode"
				closable="false">
				<p:commandButton value="#{msg.sim}" type="button"
					styleClass="ui-confirmdialog-yes" icon="ui-icon-check">
					<p:ajax event="click" listener="#{listarSoftwareBean.buscar}" />
				</p:commandButton>
				<p:commandButton value="#{msg.nao}" type="button"
					styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
			</p:confirmDialog>
		</h:form>
		<p:dialog header="Enter FirstName" widgetVar="dlg" resizable="true"
			showEffect="fade" hideEffect="explode" modal="true">
			<h:panelGrid columns="2" cellpadding="5" id="gridDetail">
				<h:outputText value="Marca"></h:outputText>
				<h:outputText value="#{listarSoftwareBean.software.marca}"></h:outputText>


				<h:outputText value="Modelo" />
				<h:outputText value="#{listarSoftwareBean.software.modelo}" />

				<h:outputText value="Observação" />
				<h:outputText value="#{listarSoftwareBean.software.observacao}" />

				<h:outputText value="Tipo"></h:outputText>
				<h:outputText value="#{listarSoftwareBean.software.tipo.nome}"></h:outputText>
			</h:panelGrid>
		</p:dialog>
	</ui:define>
</ui:composition>
</html>